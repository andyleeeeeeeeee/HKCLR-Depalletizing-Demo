<launch>

  <arg name="full_collision_avoidance" default="false"/>
  <arg name="is_box_mixed" default="true"/>
  <arg name="is_small_box" default="true"/>

  <param name="/use_sim_time" value="true"/>

  <node pkg="roport" type="roport_moveit_server.py" name="roport_moveit_server" output="screen">
    <rosparam param="group_names">['arm']</rosparam>
    <rosparam param="ee_links">['tcp']</rosparam>
  </node>

  <group if="$(arg is_box_mixed)">
    <node name="palletizing_helper" pkg="roport" type="palletizing_helper.py" respawn="false" output="screen">
      <rosparam command="load" file="$(find roport)/config/sim_helper_hkcenter_mixed.yaml"/>
    </node>
    <group if="$(arg full_collision_avoidance)">
     <node pkg="roport" type="roport_task_scheduler" name="roport_task_scheduler" output="screen">
      <param name="tree_file" value="$(find roport)/tree/hkcenter_palletizing_sim_full_collision.xml" />
     </node>
    </group>
    <group unless="$(arg full_collision_avoidance)">
     <node pkg="roport" type="roport_task_scheduler" name="roport_task_scheduler" output="screen">
      <param name="tree_file" value="$(find roport)/tree/hkcenter_sim_static_collision_mixed.xml" />
     </node>
    </group>
  </group>



  <group unless="$(arg is_box_mixed)">
   <group if="$(arg is_small_box)">
    <node name="palletizing_helper" pkg="roport" type="palletizing_helper.py" respawn="false" output="screen">
      <rosparam command="load" file="$(find roport)/config/sim_helper_hkcenter_small.yaml"/>
    </node>
   </group>
   <group unless="$(arg is_small_box)">
    <node name="palletizing_helper" pkg="roport" type="palletizing_helper.py" respawn="false" output="screen">
      <rosparam command="load" file="$(find roport)/config/sim_helper_hkcenter_large.yaml"/>
    </node>
   </group>
    <group if="$(arg is_small_box)">
      <node pkg="roport" type="roport_task_scheduler" name="roport_task_scheduler" output="screen">
        <param name="tree_file" value="$(find roport)/tree/hkcenter_sim_static_collision_small.xml" />
      </node>
    </group>
    <group unless="$(arg is_small_box)">
      <node pkg="roport" type="roport_task_scheduler" name="roport_task_scheduler" output="screen">
        <param name="tree_file" value="$(find roport)/tree/hkcenter_sim_static_collision_large.xml" />
      </node>
    </group>
  </group>
</launch>
